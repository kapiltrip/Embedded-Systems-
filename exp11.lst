


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             EXP11, CODE, READONLY
    2 00000000                 EXPORT           _start
    3 00000000                 ENTRY
    4 00000000         
    5 00000000 00003100 
                       DATA_BASE
                               EQU              0x00003100  ; base address of c
                                                            onstant/result bloc
                                                            k in memory
    6 00000000         
    7 00000000         ; Computes expression (a*x^2 + b*y^2) and (6(x+y) + 2z +
                        4) using literal data.
    8 00000000         ; Offsets and hexadecimal values are noted so you can ma
                       tch debugger memory views.
    9 00000000         _start
   10 00000000         ; ---- Expression A: a*x^2 + b*y^2 ----
   11 00000000 E59F0090        LDR              r0, =A_VAL  ; r0 = &A_VAL (0x00
                                                            003100)
   12 00000004 E5900000        LDR              r0, [r0]    ; r0 = a = 0x000000
                                                            02
   13 00000008 E59F108C        LDR              r1, =X_VAL  ; r1 = &X_VAL (0x00
                                                            003108)
   14 0000000C E5911000        LDR              r1, [r1]    ; r1 = x = 0x000000
                                                            04
   15 00000010 E0020191        MUL              r2, r1, r1  ; r2 = x^2
   16 00000014 E0020290        MUL              r2, r0, r2  ; r2 = a*x ^2 
   17 00000018         
   18 00000018 E59F3080        LDR              r3, =B_VAL  ; r3 = &B_VAL (0x00
                                                            003104)
   19 0000001C E5933000        LDR              r3, [r3]    ; r3 = b = 0x000000
                                                            03
   20 00000020 E59F407C        LDR              r4, =Y_VAL  ; r4 = &Y_VAL (0x00
                                                            00310C)
   21 00000024 E5944000        LDR              r4, [r4]    ; r4 = y = 0x000000
                                                            05
   22 00000028 E0050494        MUL              r5, r4, r4  ; r5 = y^2
   23 0000002C E0050593        MUL              r5, r3, r5  ; r5 = b*y ^2 
   24 00000030         
   25 00000030 E0826005        ADD              r6, r2, r5  ; r6 = a*x^2 + b*y^
                                                            2 (expect 0x0000006
                                                            B)
   26 00000034 E59F706C        LDR              r7, =RESULT_A ; r7 = &RESULT_A 
                                                            (0x00003110)
   27 00000038 E5876000        STR              r6, [r7]    ; [0x00003110] <= 0
                                                            x0000006B
   28 0000003C         
   29 0000003C         ; ---- Expression B: 6(x + y) + 2z + 4 ----
   30 0000003C E59F0068        LDR              r0, =X2_VAL ; r0 = &X2_VAL (0x0
                                                            0003114)
   31 00000040 E5900000        LDR              r0, [r0]    ; r0 = x = 0x000000
                                                            01
   32 00000044 E59F1064        LDR              r1, =Y2_VAL ; r1 = &Y2_VAL (0x0
                                                            0003118)
   33 00000048 E5911000        LDR              r1, [r1]    ; r1 = y = 0x000000
                                                            02
   34 0000004C E0802001        ADD              r2, r0, r1  ; r2 = x + y
   35 00000050 E3A03006        MOV              r3, #6      ; r3 = 0x00000006
   36 00000054 E0020293        MUL              r2, r3, r2  ; r2 = 6(x + y)
   37 00000058         



ARM Macro Assembler    Page 2 


   38 00000058 E59F4054        LDR              r4, =Z_VAL  ; r4 = &Z_VAL (0x00
                                                            00311C)
   39 0000005C E5944000        LDR              r4, [r4]    ; r4 = z = 0x000000
                                                            03
   40 00000060 E0822084        ADD              r2, r2, r4, LSL #1 ; r2 += 2z (
                                                            adds 0x00000006)
   41 00000064 E2822004        ADD              r2, r2, #4  ; r2 += 0x00000004
   42 00000068 E59F5048        LDR              r5, =RESULT_B ; r5 = &RESULT_B 
                                                            (0x00003120)
   43 0000006C E5852000        STR              r2, [r5]    ; [0x00003120] <= 0
                                                            x0000001C
   44 00000070         
   45 00000070         stop
   46 00000070 EAFFFFFE        B                stop        ; simple halt loop 
                                                            for debugger
   47 00000074         
   48 00000074                 ALIGN
   49 00000074         ; Data layout (absolute addresses based on DATA_BASE = 0
                       x00003100)
   50 00000074 00000002 
                       A_VAL   DCD              0x00000002  ; 0x00003100  (a)
   51 00000078 00000003 
                       B_VAL   DCD              0x00000003  ; 0x00003104  (b)
   52 0000007C 00000004 
                       X_VAL   DCD              0x00000004  ; 0x00003108  (x)
   53 00000080 00000005 
                       Y_VAL   DCD              0x00000005  ; 0x0000310C  (y)
   54 00000084 00000000 
                       RESULT_A
                               DCD              0x00000000  ; 0x00003110  expec
                                                            t 0x0000006B
   55 00000088 00000001 
                       X2_VAL  DCD              0x00000001  ; 0x00003114  (x fo
                                                            r expr B)
   56 0000008C 00000002 
                       Y2_VAL  DCD              0x00000002  ; 0x00003118  (y fo
                                                            r expr B)
   57 00000090 00000003 
                       Z_VAL   DCD              0x00000003  ; 0x0000311C  (z)
   58 00000094 00000000 
                       RESULT_B
                               DCD              0x00000000  ; 0x00003120  expec
                                                            t 0x0000001C
   59 00000098         
   60 00000098         ; Memory map range (Read + Write): 0x00003100 .. 0x00003
                       123
   61 00000098         ; Example bytes before run:
   62 00000098         ;   [0x00003100] = 00 00 00 02 (a)
   63 00000098         ;   [0x00003104] = 00 00 00 03 (b)
   64 00000098         ;   [0x00003108] = 00 00 00 04 (x)
   65 00000098         ;   [0x0000310C] = 00 00 00 05 (y)
   66 00000098         ;   [0x00003114] = 00 00 00 01 (x2)
   67 00000098         ;   [0x00003118] = 00 00 00 02 (y2)
   68 00000098         ;   [0x0000311C] = 00 00 00 03 (z)
   69 00000098         ; After run:
   70 00000098         ;   [0x00003110] = 00 00 00 6B (RESULT_A)
   71 00000098         ;   [0x00003120] = 00 00 00 1C (RESULT_B)
   72 00000098                 END
              00000000 



ARM Macro Assembler    Page 3 


              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
              00000000 
Command Line: --debug --xref --bi --apcs=interwork --depend=exp11.d -oexp11.o -
IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Include --predefine="__EVAL SETA 1" -
-list=exp11.lst exp11.asm



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

A_VAL 00000074

Symbol: A_VAL
   Definitions
      At line 50 in file exp11.asm
   Uses
      At line 11 in file exp11.asm
Comment: A_VAL used once
B_VAL 00000078

Symbol: B_VAL
   Definitions
      At line 51 in file exp11.asm
   Uses
      At line 18 in file exp11.asm
Comment: B_VAL used once
EXP11 00000000

Symbol: EXP11
   Definitions
      At line 1 in file exp11.asm
   Uses
      None
Comment: EXP11 unused
RESULT_A 00000084

Symbol: RESULT_A
   Definitions
      At line 54 in file exp11.asm
   Uses
      At line 26 in file exp11.asm
Comment: RESULT_A used once
RESULT_B 00000094

Symbol: RESULT_B
   Definitions
      At line 58 in file exp11.asm
   Uses
      At line 42 in file exp11.asm
Comment: RESULT_B used once
X2_VAL 00000088

Symbol: X2_VAL
   Definitions
      At line 55 in file exp11.asm
   Uses
      At line 30 in file exp11.asm
Comment: X2_VAL used once
X_VAL 0000007C

Symbol: X_VAL
   Definitions
      At line 52 in file exp11.asm
   Uses
      At line 13 in file exp11.asm
Comment: X_VAL used once
Y2_VAL 0000008C

Symbol: Y2_VAL



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 56 in file exp11.asm
   Uses
      At line 32 in file exp11.asm
Comment: Y2_VAL used once
Y_VAL 00000080

Symbol: Y_VAL
   Definitions
      At line 53 in file exp11.asm
   Uses
      At line 20 in file exp11.asm
Comment: Y_VAL used once
Z_VAL 00000090

Symbol: Z_VAL
   Definitions
      At line 57 in file exp11.asm
   Uses
      At line 38 in file exp11.asm
Comment: Z_VAL used once
_start 00000000

Symbol: _start
   Definitions
      At line 9 in file exp11.asm
   Uses
      At line 2 in file exp11.asm
Comment: _start used once
stop 00000070

Symbol: stop
   Definitions
      At line 45 in file exp11.asm
   Uses
      At line 46 in file exp11.asm
Comment: stop used once
12 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

DATA_BASE 00003100

Symbol: DATA_BASE
   Definitions
      At line 5 in file exp11.asm
   Uses
      None
Comment: DATA_BASE unused
1 symbol
346 symbols in table
